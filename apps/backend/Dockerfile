FROM node:17

WORKDIR /backend
ARG API_KEY
ARG DB_USERNAME
ARG DB_PASSWORD
ARG DB_PORT
ARG DB_HOST
ARG DB_DIALECT

ENV API_KEY $API_KEY
ENV DB_USERNAME $DB_USERNAME
ENV DB_PASSWORD $DB_PASSWORD
ENV DB_PORT $DB_PORT
ENV DB_HOST $DB_HOST
ENV DB_DIALECT $DB_DIALECT

COPY package.json /backend
COPY yarn.lock /backend

RUN yarn install

COPY . /backend

RUN yarn run build
CMD yarn run start
